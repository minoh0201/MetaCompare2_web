{% load static %}
<html lang="en">

<head>
    
    <script src="{% static 'vis/dist/vis.js' %}"></script>
    <link href="{% static 'vis/dist/vis-timeline-graph2d.min.css' %}" rel="stylesheet" type="text/css" />

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	<title>MetaCompareWeb (Beta)</title>

	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CVarela+Round" rel="stylesheet">

	<!-- Bootstrap -->
    <link type="text/css" rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />

	<!-- Owl Carousel -->
	<link type="text/css" rel="stylesheet" href="{% static 'css/owl.carousel.css' %}" />
	<link type="text/css" rel="stylesheet" href="{% static 'css/owl.theme.default.css' %}" />

	<!-- Magnific Popup -->
	<link type="text/css" rel="stylesheet" href="{% static 'css/magnific-popup.css' %}" />

	<!-- Font Awesome Icon -->
	<link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">

	<!-- Custom stlylesheet -->
	<link type="text/css" rel="stylesheet" href="{% static 'css/style.css' %}" />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

    <style type="text/css">
        body, html {
            font-family: sans-serif;
        }
        
        .vis-item.sequence{
            background-color: lightgray;
            border-width: 0;
        }

        .vis-item.arg{
            background-color: salmon;
        }

        .vis-item.mge{
            background-color: lightgreen;
        }

        .vis-item.pat{
            background-color: purple;
            color: white;
        }
    </style>

</head>
<body>

		<!-- Nav -->
		<nav id="nav" class="navbar">
			<div class="container">

				<div class="navbar-header">
					<!-- Logo -->
					<div class="navbar-brand">
						<a href="{% url 'main' %}">

                            <h2 class="logo">MetaCompareWeb <font size=5>(Beta)</font></h2>

                            <!--
                            <img class="logo" src="img/logo.png" alt="logo">
							<img class="logo-alt" src="img/logo-alt.png" alt="logo">a
							-->
						</a>
					</div>
					<!-- /Logo -->

					<!-- Collapse nav button -->
					<div class="nav-collapse">
						<span></span>
					</div>
					<!-- /Collapse nav button -->
				</div>

				<!--  Main navigation  -->
				<ul class="main-nav nav navbar-nav navbar-right">
					<li><a href="{% url 'main' %}">Home</a></li>


					<!-- Menu !!

					<li><a href="#service">Services</a></li>
					<li><a href="#pricing">Prices</a></li>
					<li><a href="#team">Team</a></li>
					<li class="has-dropdown"><a href="#blog">Blog</a>
						<ul class="dropdown">
							<li><a href="blog-single.html">blog post</a></li>
						</ul>
					</li>

					<li><a href="#contact">Contact</a></li>
					-->

						{% if user.is_authenticated %}
							<li><a href="{% url 'project' %}">My Project</a></li>
							<li><a href="{% url 'logout' %}">Logout</a></li>
						{% endif %}
				</ul>
				<!-- /Main navigation -->

			</div>
		</nav>
        <!-- /Nav -->
        
        <!--Back Button-->
        <!-- <div>
            <a href="{% url 'display_scaffolds' pk=pk %}">
                <button class="btn btn-info" style="margin:1%">
                    <i class="fa fa-arrow-left" style="font-size:16px"></i> Back
                </button>
            </a>
        </div> -->
        <!--/Back Button-->

        <!--Visualization div-->
        <div>            
            <h2 style="padding-left: 1%;">{{ scaffold_id }}</h2>
            <div id="visualization" style="padding-left: 2%; padding-right: 2%;"></div>
            <div style="position: absolute; left: 3%;">Start: 1</div>
            <div style="position: absolute; right: 2%;">End: {{ length }}</div>
        </div>
        <!--/Visualization div-->
        <br>
        <br>
        <!-- Show all hits -->
        <div style="margin-left:2%; margin-right:2%; max-width: 100%;">
            <table class="table-fill" >
                <thead>
                    <tr>
                        <th class="text-center">Type</th>
                        <th class="text-center">Reference database ID</th>
                        <th class="text-center">Start</th>
                        <th class="text-center">End</th>
                        <th class="text-center">Sequence</th>
                    </tr>
                </thead>
                <tbody class="table-hover">
                    {% for hit in hits %}
                    <tr>
                        <td class="text-center">{{ hit.type }}</td>
                        <td class="text-center">{{ hit.id }}</td>
                        <td class="text-center">{{ hit.start }}</td>
                        <td class="text-center">{{ hit.end }}</td>
                        <td class="text-center"><a href="">{{ hit.sequence|truncatechars:40 }}</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <!-- /Show all hits -->
        

</body>
<script type="text/javascript">
    // DOM element where the Timeline will be attached
    var container = document.getElementById('visualization');

    // Create a DataSet (allows two way data-binding)
    totalLength = {{ length }};
    function getScaffoldId(){
        return 'scaffold_3';
    }
    // scaffoldId = getScaffoldId();
    var items = new vis.DataSet( {{ data_set|safe }} );
    // var items = new vis.DataSet([
    //     {id: 1, group:2, content: 'item 1', className: 'mge', start: 90, end: 95},
    //     {id: 2, group:2, content: 'item 2', className: 'mge', start: 10, end: 20},
    //     {id: 3, group:2, content: 'item 3', className: 'mge', start: 20, end: 30},
    //     {id: 4, group:1, content: 'item 4', className: 'arg', start: 30, end: 45},
    //     {id: 5, group:1, content: 'item 5', className: 'arg', start: 60, end: 70},
    //     {id: 6, group:3, content: 'item 6', className: 'pat', start: 90, end: 100},
    //     {id: 7, group:0, content: 'A', className: 'sequence', start: 0, end: 1},
    //     {id: 8, group:0, content: 'T', className: 'sequence', start: 1, end: 2},
    //     {id: 9, group:0, content: 'A', className: 'sequence', start: 2, end: 3},
    //     {id: 10, group:0, content: 'G', className: 'sequence', start: 3, end: 4},
    //     {id: 11, group:0, content: 'C', className: 'sequence', start: 4, end: 5},
    // ]);

    var groups = [
        {
            id: 0,
            content: 'Scaffold ID',
            subgroupStack: true,
            className: 'sequence'
        },
        {
            id: 1,
            content: 'ARGs',
            subgroupStack: false,
            className: 'arg'
        },
        {
            id: 2,
            content: 'MGEs',
            subgroupStack: false,
            className: 'mge'
        },
        {
            id:3,
            content: 'Pathogens',
            subgroupStack: false,
            className: 'pat'
        }
    ]
    // Configuration for the Timeline
    var options = {
        start: new Date(1),
        end: new Date(totalLength),
        min: new Date(1),
        max: new Date(totalLength),
        showMajorLabels:false,
        format: {
            minorLabels: function(date, scale, step) {
                switch (scale) {
                case 'millisecond':
                    return new Date(date).getTime() + "";
                case 'second':
                    // var seconds = Math.round(new Date(date).getTime() / 1000);
                    // return seconds*60 + "";
                    return new Date(date).getTime() + ""
                case 'minute':
                    // var minutes = Math.round(new Date(date).getTime() / 1000 * 60);
                    // return minutes*60*60 + "";
                    return new Date(date).getTime() + ""
                case 'hour':
                    // var hour = Math.round(new Date(date).getTime() / 1000 * 60 * 60);
                    // return minutes*60*60 + "";
                    return new Date(date).getTime() + ""
                }
            }
        },
    };

    // Create a Timeline
    var timeline = new vis.Timeline(container, items, groups, options);
</script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

</html>